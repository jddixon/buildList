<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>buildList</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="css/main.css" />
  <link rel="stylesheet" type="text/css" href="css/normalize.css" />
  <link rel="stylesheet" type="text/css" href="css/ghp.css" />
</head>
<body>
<div class="content">
<h1 class="libTop">buildList</h1>

<p>A set of Python3 utilities conforming to the
<a href="https://jddixon.github.io/xlattice/buildList.html">BuildList</a>
specification and
intended to be interoperable with the Go
<strong>builds/</strong> package in
<a href="https://jddixon.github.com/xlCrypto_go">xlCrypto_go</a>
as well as the Java version in
<a href="https://jddixon.github.com/xlCrypto_java">xlCrypto.java</a>.</p>

<h2>blBootStrap</h2>

<p>A utility for use in testing the buildList package.  It generates a
directory tree, <code>example/</code> by default, in the current directory.  This
contains a data directory, <code>dataDir</code>; a corresponding BuildList,
<code>example.bld</code>; a secret key in <code>node</code>, and a matching content key
directory, <code>uDir</code>.  The distribution contains an SHA1 example directory
under <code>example1/</code> and an SHA256 directory as <code>example2/</code>.</p>

<pre><code>usage: blBootstrap [-h] [-e EXDIR] [-f] [-j] [-T] [-v]

generate a sample data tree, write a build list, and create a corresponding
content-keyed store

optional arguments:
  -h, --help            show this help message and exit
  -e EXDIR, --exDir EXDIR
                        example directory, defaults to example/
  -f, --force           overwrite any existing example/ directory
  -j, --justShow        show options and exit
  -T, --testing         this is a test run
  -v, --verbose         be chatty
</code></pre>

<h2>blCheck</h2>

<p>This script runs an integrity check on a BuildList (<code>LISTFILE</code>) against
a given data directory (<code>DATADIR</code>) and content directory (<code>UDIR</code>).  The
BuildList file name and at least one of the data directory and content
directory must be present.</p>

<pre><code>usage: blCheck [-h] [-1] [-b LISTFILE] [-d DATADIR] [-i IGNOREFILE] [-j]
               [-u UDIR] [-v]

verify integrity of build list, optionally agains root dir and uDir&quot;

optional arguments:
  -h, --help            show this help message and exit
  -1, --usingSHA1       using the 160-bit SHA1 hash
  -b LISTFILE, --listFile LISTFILE
                        root directory for build list
  -d DATADIR, --dataDir DATADIR
                        root directory for build list
  -i IGNOREFILE, --ignoreFile IGNOREFILE
                        file containing wildcards (globs) for files to ignore
  -j, --justShow        show options and exit
  -u UDIR, --uDir UDIR  path to uDir
  -v, --verbose         be chatty
</code></pre>

<h2>blListGen</h2>

<p>Given a source directory specified by <code>-r</code>, writes a buildList to <code>LISTFILE</code>.</p>

<p>If the <code>-u</code> option is present, <code>UPATH</code> is a directory for the storage of files
by content key; <code>blListGen</code> will copy each file in the build list into that
directory if the file is not already present.</p>

<p>It is usually important to skip some files, <strong>not</strong> adding them to the
buildList and the backup directory.  Such files are
specified with the <code>-X</code> option.</p>

<pre><code>usage: blListGen [-h] [-1] [-b LISTFILE] [-D DVCZDIR] [-d DATADIR]
                 [-i IGNOREFILE] [-j] [-k KEYFILE] [-L] [-M MATCHPAT] [-T]
                 [-t TITLE] [-u UPATH] [-V] [-v] [-X EXCLUSIONS]

generate build list for directory, optionally populating uPath

optional arguments:
  -h, --help            show this help message and exit
  -1, --usingSHA1       use SHA1 in building merkletree (default=false=use
                        SHA256)
  -b LISTFILE, --listFile LISTFILE
                        path to build list
  -D DVCZDIR, --dvczDir DVCZDIR
                        dvcz directory (default=.dvcz)
  -d DATADIR, --dataDir DATADIR
                        data directory for build list (default=./)
  -i IGNOREFILE, --ignoreFile IGNOREFILE
                        file containing wildcards (globs) for files to ignore
  -j, --justShow        show options and exit
  -k KEYFILE, --keyFile KEYFILE
                        path to RSA private key for signing
  -L, --logging         append timestamp and BuildList hash to to .dvcz/builds
  -M MATCHPAT, --matchPat MATCHPAT
                        include only files matching this pattern
  -T, --testing         this is a test run
  -t TITLE, --title TITLE
                        title for build list
  -u UPATH, --uPath UPATH
                        path to uPath (relative to tmp/ if testing)
  -V, --showVersion     display version number and exit
  -v, --verbose         be chatty
  -X EXCLUSIONS, --exclusions EXCLUSIONS
                        do not include files/directories matching this pattern
</code></pre>

<h2>blSrcGen</h2>

<p>This utility is complementary to <code>blListGen</code>: given a build list and
a backup directory indexed by content key, <code>blSrcGen</code> will rebuild the
source directory.  This can be used, for example, to restore an earlier
version of a source tree or to switch to another branch.</p>

<pre><code>usage: blSrcGen [-h] [-b LISTFILE] [-d DATADIR] [-f] [-j] [-k KEYFILE]
                [-M MATCHON] [-T] [-u UPATH] [-V] [-v] [-X EXCLUSIONS]

given a build list and uDir, regenerate the data directory

optional arguments:
  -h, --help            show this help message and exit
  -b LISTFILE, --listFile LISTFILE
                        where to find the build list
  -d DATADIR, --dataDir DATADIR
                        where to write the new tree
  -f, --force           do it despite objections
  -j, --justShow        show options and exit
  -k KEYFILE, --keyFile KEYFILE
                        path to RSA key for verifying dig sig
  -M MATCHON, --matchOn MATCHON
                        include only files matching this pattern
  -T, --testing         this is a test run
  -u UPATH, --uPath UPATH
                        path to uDir (relative to tmp/ if testing)
  -V, --showVersion     display version number and exit
  -v, --verbose         be chatty
  -X EXCLUSIONS, --exclusions EXCLUSIONS
                        do not include files/directories matching this pattern
</code></pre>

<h2>Project Status</h2>

<p>A reasonable beta.</p>

<h2>Licensing</h2>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />The material on this github.io website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
<p>Project software is licensed under an MIT license.
Follow the SOFTWARE LICENSE link below for more information on project software licensing.</p>  <div class="f">
    <hr />
    <div class="license">
      <p><a href="LICENSE.html">SOFTWARE LICENSE</a></p>
    </div>
    <div class="project">
      github <a href="https://github.com/jddixon/buildList">      <img src="img/GitHub-Mark-32px.png" 
        alt="link to project"  
        style="display: inline-block; margin-left: 0 auto; margin-right: 0 auto">
       </a> project
    </div>
    <div class="logo" >
      <a href="https://jddixon.github.io/xlattice/">
      <img src="img/xlattice-2014.jpg" alt="the XLattice Project" style="float: right;" >
      </a>
    </div>
  </div>
</div>
</body>
</html>
