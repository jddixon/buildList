<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>buildlist</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="css/main.css" />
  <link rel="stylesheet" type="text/css" href="css/normalize.css" />
  <link rel="stylesheet" type="text/css" href="css/ghp.css" />
</head>
<body>
<div class="content">
<h1 class="libTop">buildlist</h1>

<p>A set of Python3 utilities conforming to the
<a href="https://jddixon.github.io/xlattice/buildList.html">BuildList</a>
specification and
intended to be interoperable with the Go
<strong>builds/</strong> package in
<a href="https://jddixon.github.com/xlCrypto_go">xlCrypto_go</a>
as well as the Java version in
<a href="https://jddixon.github.com/xlCrypto_java">xlCrypto.java</a>.</p>

<h2>bl_bootstrap</h2>

<p>A utility for use in testing the buildlist package.  It generates a
directory tree, <code>example/</code> by default, in the current directory.  This
contains a data directory, <code>dataDir</code>; a corresponding BuildList,
<code>example.bld</code>; a secret key in <code>node</code>, and a matching content key
directory, <code>uDir</code>.  The distribution contains an SHA1 example directory
under <code>example1/</code> and an SHA256 directory as <code>example2/</code>.</p>

<pre><code>usage: bl_bootstrap [-h] [-e EX_DIR] [-f] [-j] [-v]

generate a sample data tree, write a build list, and create a corresponding
content-keyed store

optional arguments:
  -h, --help            show this help message and exit
  -e EX_DIR, --ex_dir EX_DIR
                        example directory, defaults to example/
  -f, --force           overwrite any existing example/ directory
  -j, --just_show       show options and exit
  -v, --verbose         be chatty
</code></pre>

<h2>bl_check</h2>

<p>This script runs an integrity check on a BuildList (<code>LISTFILE</code>) against
a given data directory (<code>DATADIR</code>) and content directory (<code>UDIR</code>).  The
BuildList file name and at least one of the data directory and content
directory must be present.</p>

<pre><code>usage: bl_check [-h] [-b LIST_FILE] [-d DATA_DIR] [-i IGNORE_FILE] [-j] [-1]
                [-2] [-3] [-u U_PATH] [-v]

verify integrity of build list, optionally agains root dir and u_path&quot;

optional arguments:
  -h, --help            show this help message and exit
  -b LIST_FILE, --list_file LIST_FILE
                        root directory for build list
  -d DATA_DIR, --data_dir DATA_DIR
                        root directory for build list
  -i IGNORE_FILE, --ignore_file IGNORE_FILE
                        file containing wildcards (globs) for files to ignore
  -j, --just_show       show options and exit
  -1, --using_sha1      using the 160-bit SHA1 hash
  -2, --using_sha2      using the 256-bit SHA2 (SHA256) hash
  -3, --using_sha3      using the 256-bit SHA3 (Keccak-256) hash
  -u U_PATH, --u_path U_PATH
                        path to uDir
  -v, --verbose         be chatty
</code></pre>

<h2>bl_createtestdata1</h2>

<p>Create test data for
<a href="https://github.com/jddixon/xl_test_data">https://github.com/jddixon/xl<em>test</em>data</a>.</p>

<p>The test data is intended for testing interoperability between various
gibhub probjects using different computer languages, specifically Python
and Go in the shorter term.  Data consists of a random directory structure
containing raw data files of random length and then corresponding</p>

<ul>
<li>NLHTrees</li>
<li>BuildLists</li>
<li>content-keyed stores using SHA{1,2,3} structured as flat, 16x16, and 256x256</li>
</ul>

<p>Replaces <code>bl_bootstrap</code>.  Output is to the xl<em>test</em>data project directory.</p>

<pre><code>usage: bl_createtestdata1 [-h] [-f] [-j] [-o OUT_PATH] [-v]

generate a sample data tree, write a build list, and create a corresponding
content-keyed store

optional arguments:
  -h, --help            show this help message and exit
  -f, --force           overwrite any existing example/ directory
  -j, --justShow        show options and exit
  -o OUT_PATH, --out_path OUT_PATH
                        example directory, defaults to
                        &#39;../../dat/xl_test_data/treeData/binExample_1&#39;
  -v, --verbose         be chatty
</code></pre>

<h2>bl_listgen</h2>

<p>Given a source directory specified by <code>-r</code>, writes a buildlist to <code>LISTFILE</code>.</p>

<p>If the <code>-u</code> option is present, <code>UPATH</code> is a directory for the storage of files
by content key; <code>blListGen</code> will copy each file in the build list into that
directory if the file is not already present.</p>

<p>It is usually important to skip some files, <strong>not</strong> adding them to the
buildlist and the backup directory.  Such files are
specified with the <code>-X</code> option.</p>

<pre><code>usage: bl_listgen [-h] [-b LIST_FILE] [-D DVCZ_DIR] [-d DATA_DIR]
                   [-i IGNORE_FILE] [-j] [-k KEY_FILE] [-L] [-M MATCHPAT] [-T]
                   [-t TITLE] [-V] [-1] [-2] [-3] [-u U_PATH] [-v]
                   [-X EXCLUSIONS]

generate build list for directory, optionally populating u_path

optional arguments:
  -h, --help            show this help message and exit
  -b LIST_FILE, --list_file LIST_FILE
                        path to build list
  -D DVCZ_DIR, --dvcz_dir DVCZ_DIR
                        dvcz directory (default=.dvcz)
  -d DATA_DIR, --data_dir DATA_DIR
                        data directory for build list (default=./)
  -i IGNORE_FILE, --ignore_file IGNORE_FILE
                        file containing wildcards (globs) for files to ignore
  -j, --just_show       show options and exit
  -k KEY_FILE, --key_file KEY_FILE
                        path to RSA private key for signing
  -L, --logging         append timestamp and BuildList hash to to .dvcz/builds
  -M MATCHPAT, --matchPat MATCHPAT
                        include only files matching this pattern
  -T, --testing         this is a test run
  -t TITLE, --title TITLE
                        title for build list
  -V, --showVersion     display version number and exit
  -1, --using_sha1      using the 160-bit SHA1 hash
  -2, --using_sha2      using the 256-bit SHA2 (SHA256) hash
  -3, --using_sha3      using the 256-bit SHA3 (Keccak-256) hash
  -u U_PATH, --u_path U_PATH
                        path to uDir
  -v, --verbose         be chatty
  -X EXCLUSIONS, --exclusions EXCLUSIONS
                        do not include files/directories matching this pattern
</code></pre>

<h2>bl_srcgen</h2>

<p>This utility is complementary to <code>blListGen</code>: given a build list and
a backup directory indexed by content key, <code>blSrcGen</code> will rebuild the
source directory.  This can be used, for example, to restore an earlier
version of a source tree or to switch to another branch.</p>

<pre><code>usage: bl_srcgen [-h] [-b LIST_FILE] [-d DATA_DIR] [-f] [-j] [-k KEY_FILE]
                  [-M MATCH_ON] [-T] [-u U_PATH] [-V] [-v] [-X EXCLUSIONS]

given a build list and uDir, regenerate the data directory

optional arguments:
  -h, --help            show this help message and exit
  -b LIST_FILE, --list_file LIST_FILE
                        where to find the build list
  -d DATA_DIR, --data_dir DATA_DIR
                        where to write the new tree
  -f, --force           do it despite objections
  -j, --just_show       show options and exit
  -k KEY_FILE, --key_file KEY_FILE
                        path to RSA key for verifying dig sig
  -M MATCH_ON, --match_on MATCH_ON
                        include only files matching this pattern
  -T, --testing         this is a test run
  -u U_PATH, --u_path U_PATH
                        path to uDir (relative to tmp/ if testing)
  -V, --show_version    display version number and exit
  -v, --verbose         be chatty
  -X EXCLUSIONS, --exclusions EXCLUSIONS
                        do not include files/directories matching this pattern
</code></pre>

<h2>Project Status</h2>

<p>A reasonable beta.</p>

<h2>Licensing</h2>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />The material on this github.io website is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
<p>Project software is licensed under an MIT license.
Follow the SOFTWARE LICENSE link below for more information on project software licensing.</p>  <div class="f">
    <hr />
    <div class="license">
      <p><a href="LICENSE-MIT.html">SOFTWARE LICENSE</a></p>
    </div>
    <div class="project">
      github <a href="https://github.com/jddixon/buildlist">      <img src="img/GitHub-Mark-32px.png" 
        alt="link to project"  
        style="display: inline-block; margin-left: 0 auto; margin-right: 0 auto">
       </a> project
    </div>
    <div class="logo" >
      <a href="https://jddixon.github.io/xlattice/">
      <img src="img/xlattice-2014.jpg" alt="the XLattice Project" style="float: right;" >
      </a>
    </div>
  </div>
</div>
</body>
</html>
